id: test.circular-refs
version: 1.0.0

metadata:
  name: circular-refs
  version: 1.0.0
  authors: [Test]
  description: Invalid package with circular references

namespaces:
  main:
    id: main
    datatypes:
      colors:
        name: colors
        values:
          - text: red
          - text: blue

    promptsections:
      scene1:
        name: scene1
        template: "Scene 1 with {scene2_ref}"
        references:
          scene2_ref:
            target: "main:scene2"
            min: 1
            max: 1

      scene2:
        name: scene2
        template: "Scene 2 with {scene1_ref}"
        references:
          scene1_ref:
            target: "main:scene1"
            min: 1
            max: 1

rulebooks:
  - name: default
    description: Default rulebook
    entry_points:
      - prompt_section: "main:scene1"
        weight: 1.0

