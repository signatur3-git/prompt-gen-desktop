# M2: Minimal Test Package
# Purpose: Validate package loading and display

id: test.minimal
version: 1.0.0

metadata:
  name: Minimal Test Package
  description: A minimal package for testing M2 Foundation
  authors:
    - RPG Spec Team
  bypass_filters: false

namespaces:
  test:
    id: test
    datatypes:
      colors:
        name: colors
        values:
          - text: red
            tags:
              article: a
              phonetic: consonant
          - text: blue
            tags:
              article: a
              phonetic: consonant
          - text: orange
            tags:
              article: an
              phonetic: vowel

      objects:
        name: objects
        values:
          - text: ball
            tags:
              article: a
              plural: balls
          - text: apple
            tags:
              article: an
              plural: apples

    prompt_sections:
      # M3: Simple template without article (Rules not yet implemented)
      basic:
        name: basic
        template: "{color} {object}"
        references:
          color:
            target: test:colors
            min: 1
            max: 1
          object:
            target: test:objects
            min: 1
            max: 1

      # M4: Will work when Rules are implemented
      with_article:
        name: with_article
        template: "{article} {color} {object}"
        references:
          color:
            target: test:colors
            min: 1
            max: 1
          object:
            target: test:objects
            min: 1
            max: 1
          article:
            target: context:article  # Read from context (populated by Rules)
            min: 1
            max: 1

    rules:
      compute_article:
        when: "ref:color.tags.article"
        logic: ""
        set: "context.prompt.article"
        value: "ref:color.tags.article"

dependencies: []

